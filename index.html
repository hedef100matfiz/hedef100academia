<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hedef100Academia - Premium Hub</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        navy: { 800: '#1e293b', 900: '#0f172a', 950: '#020617' },
                        brand: { 500: '#f97316', 600: '#ea580c' }
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: system-ui, -apple-system, sans-serif; }
        /* Intro AnimasyonlarÄ± */
        @keyframes intro-pulse {
            0% { opacity: 0; transform: scale(0.9); filter: blur(10px); }
            50% { opacity: 1; transform: scale(1.05); filter: blur(0px); }
            100% { opacity: 0; transform: scale(1.1); filter: blur(5px); }
        }
        .animate-intro { animation: intro-pulse 2.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        
        /* Konfeti */
        @keyframes confetti-fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        .confetti { position: fixed; width: 10px; height: 10px; animation: confetti-fall 3s linear forwards; z-index: 9999; }
    </style>
</head>
<body class="bg-gray-50 dark:bg-navy-900 text-slate-800 dark:text-slate-100 min-h-screen transition-colors duration-300">

    <div id="root"></div>

    <script type="text/babel">
        // --- 1. DEÄžÄ°ÅžKEN TANIMLARI (Import yerine bu kullanÄ±lÄ±r) ---
        const { useState, useEffect, useMemo } = React;
        
        // Recharts'Ä± gÃ¼venli bir ÅŸekilde alÄ±yoruz (Hata Ã¶nleyici)
        const RechartsLib = window.Recharts || Recharts;
        const { 
            LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, 
            Tooltip, Legend, ResponsiveContainer, Radar, RadarChart, 
            PolarGrid, PolarAngleAxis, PolarRadiusAxis 
        } = RechartsLib;

        const { icons } = lucide;

        // --- 2. BÄ°LEÅžENLER ---
        const Card = ({ children, className }) => (
            <div className={`bg-white dark:bg-navy-800 rounded-xl shadow-lg p-6 ${className || ''}`}>
                {children}
            </div>
        );

        const Button = ({ onClick, children, variant = 'primary', className }) => {
            const baseStyle = "px-4 py-2 rounded-lg font-semibold transition-all duration-200 transform active:scale-95";
            const variants = {
                primary: "bg-brand-500 hover:bg-brand-600 text-white shadow-md shadow-brand-500/30",
                secondary: "bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white hover:bg-gray-300 dark:hover:bg-gray-600",
                danger: "bg-red-500 hover:bg-red-600 text-white"
            };
            return <button onClick={onClick} className={`${baseStyle} ${variants[variant]} ${className || ''}`}>{children}</button>;
        };

        // --- 3. ANA UYGULAMA MANTIÄžI ---
        const App = () => {
            const [showIntro, setShowIntro] = useState(true);
            const [user, setUser] = useState(null);
            const [users, setUsers] = useState([]); 
            const [activeTab, setActiveTab] = useState('dashboard');
            const [isDarkMode, setIsDarkMode] = useState(true);
            
            // VeritabanÄ± BaÅŸlatma
            useEffect(() => {
                setTimeout(() => setShowIntro(false), 3000);

                const storedUsers = JSON.parse(localStorage.getItem('users')) || [];
                
                if (storedUsers.length === 0) {
                    const demos = [
                        { id: 1, name: "Admin Ahmet", username: "admin", password: "123", role: "admin", email: "ahmetkula1903@gmail.com" },
                        { id: 2, name: "MatematikÃ§i Ali", username: "hoca1", password: "123", role: "teacher", branch: "Matematik", students: [] },
                        { id: 3, name: "Ã–ÄŸrenci AyÅŸe", username: "ogrenci1", password: "123", role: "student", target: "TÄ±p", coachId: null, stats: { math: 85, phys: 70 } }
                    ];
                    localStorage.setItem('users', JSON.stringify(demos));
                    setUsers(demos);
                } else {
                    setUsers(storedUsers);
                }
            }, []);

            // Login / Register State
            const [loginMode, setLoginMode] = useState('login');
            const [authForm, setAuthForm] = useState({ name: '', username: '', password: '', role: 'student', branch: 'Matematik' });
            const [adminCode, setAdminCode] = useState('');
            const [showAdminVerify, setShowAdminVerify] = useState(false);

            // GiriÅŸ Fonksiyonu
            const handleLogin = () => {
                const foundUser = users.find(u => u.username === authForm.username && u.password === authForm.password);
                if (foundUser) {
                    if (foundUser.role === 'admin') {
                        setShowAdminVerify(true);
                    } else {
                        setUser(foundUser);
                    }
                } else {
                    alert("KullanÄ±cÄ± adÄ± veya ÅŸifre hatalÄ±!");
                }
            };

            const handleAdminVerify = () => {
                if (adminCode === '1903') {
                    const foundUser = users.find(u => u.username === authForm.username);
                    setUser(foundUser);
                    setShowAdminVerify(false);
                } else {
                    alert("HatalÄ± GÃ¼venlik Kodu!");
                }
            };

            const handleRegister = () => {
                if (authForm.role === 'admin') {
                    const code = prompt("YÃ¶netici kaydÄ± iÃ§in gÃ¼venlik kodunu girin (Mail: ahmetkula1903@gmail.com):");
                    if (code !== '1903') return alert("Yetkisiz iÅŸlem!");
                }
                const newUser = { ...authForm, id: Date.now(), students: [], coachId: null };
                const updatedUsers = [...users, newUser];
                setUsers(updatedUsers);
                localStorage.setItem('users', JSON.stringify(updatedUsers));
                alert("KayÄ±t BaÅŸarÄ±lÄ±! GiriÅŸ yapabilirsiniz.");
                setLoginMode('login');
            };

            // Oyun Logic (Puzzle)
            const [puzzle, setPuzzle] = useState([1,2,3,4,5,6,7,8,0]);
            const [gameWon, setGameWon] = useState(false);
            
            const shufflePuzzle = () => {
                let arr = [1,2,3,4,5,6,7,8,0];
                for(let i=0; i<50; i++) {
                    const r1 = Math.floor(Math.random()*9);
                    const r2 = Math.floor(Math.random()*9);
                    [arr[r1], arr[r2]] = [arr[r2], arr[r1]];
                }
                setPuzzle(arr);
                setGameWon(false);
            };

            const moveTile = (index) => {
                if (gameWon) return;
                const emptyIndex = puzzle.indexOf(0);
                const diff = Math.abs(index - emptyIndex);
                if ((diff === 1 && Math.floor(index/3) === Math.floor(emptyIndex/3)) || diff === 3) {
                    const newPuzzle = [...puzzle];
                    [newPuzzle[index], newPuzzle[emptyIndex]] = [newPuzzle[emptyIndex], newPuzzle[index]];
                    setPuzzle(newPuzzle);
                    if (JSON.stringify(newPuzzle) === JSON.stringify([1,2,3,4,5,6,7,8,0])) {
                        setGameWon(true);
                        // Konfeti
                        const colors = ['#f00', '#0f0', '#00f', '#ff0'];
                        for(let i=0; i<50; i++) {
                            const conf = document.createElement('div');
                            conf.className = 'confetti';
                            conf.style.left = Math.random()*100 + 'vw';
                            conf.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
                            document.body.appendChild(conf);
                            setTimeout(() => conf.remove(), 3000);
                        }
                    }
                }
            };

            // --- RENDER ---
            
            // 1. Ä°NTRO
            if (showIntro) {
                return (
                    <div className="fixed inset-0 bg-navy-950 flex items-center justify-center z-50">
                        <div className="text-center animate-intro">
                            <h1 className="text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-brand-500 via-yellow-400 to-brand-500 mb-4">
                                Hedef100Academia
                            </h1>
                            <p className="text-slate-400 text-xl tracking-widest">GELECEÄžÄ°NÄ° Ä°NÅžA ET</p>
                        </div>
                    </div>
                );
            }

            // 2. LOGÄ°N
            if (!user) {
                return (
                    <div className="min-h-screen flex items-center justify-center bg-gray-100 dark:bg-navy-900 p-4">
                        <Card className="w-full max-w-md border-t-4 border-brand-500">
                            <div className="text-center mb-8">
                                <h2 className="text-3xl font-bold text-navy-900 dark:text-white">Hedef100Academia</h2>
                                <p className="text-gray-500">Universal Student Hub</p>
                            </div>

                            {showAdminVerify ? (
                                <div className="space-y-4">
                                    <div className="p-4 bg-red-100 text-red-700 rounded-lg text-sm">
                                        ðŸ”’ <b>GÃœVENLÄ°K UYARISI:</b> Kod: <code>ahmetkula1903@gmail.com</code> adresine gÃ¶nderildi.
                                    </div>
                                    <input 
                                        type="password" 
                                        placeholder="DoÄŸrulama Kodu (1903)" 
                                        className="w-full p-3 border rounded bg-white dark:bg-navy-900 dark:text-white"
                                        value={adminCode}
                                        onChange={e => setAdminCode(e.target.value)}
                                    />
                                    <Button onClick={handleAdminVerify} className="w-full">DoÄŸrula ve Gir</Button>
                                    <button onClick={() => setShowAdminVerify(false)} className="w-full text-sm text-gray-500 mt-2">Geri DÃ¶n</button>
                                </div>
                            ) : (
                                <>
                                    <div className="flex mb-6 border-b dark:border-gray-700">
                                        <button onClick={() => setLoginMode('login')} className={`flex-1 pb-2 ${loginMode === 'login' ? 'border-b-2 border-brand-500 text-brand-500' : 'text-gray-500'}`}>GiriÅŸ Yap</button>
                                        <button onClick={() => setLoginMode('register')} className={`flex-1 pb-2 ${loginMode === 'register' ? 'border-b-2 border-brand-500 text-brand-500' : 'text-gray-500'}`}>KayÄ±t Ol</button>
                                    </div>

                                    <div className="space-y-4">
                                        {loginMode === 'register' && (
                                            <input 
                                                type="text" placeholder="Ad Soyad" 
                                                className="w-full p-3 border rounded dark:bg-navy-900 dark:border-gray-700 dark:text-white"
                                                onChange={e => setAuthForm({...authForm, name: e.target.value})}
                                            />
                                        )}
                                        <input 
                                            type="text" placeholder="KullanÄ±cÄ± AdÄ±" 
                                            className="w-full p-3 border rounded dark:bg-navy-900 dark:border-gray-700 dark:text-white"
                                            onChange={e => setAuthForm({...authForm, username: e.target.value})}
                                        />
                                        <input 
                                            type="password" placeholder="Åžifre" 
                                            className="w-full p-3 border rounded dark:bg-navy-900 dark:border-gray-700 dark:text-white"
                                            onChange={e => setAuthForm({...authForm, password: e.target.value})}
                                        />
                                        
                                        {loginMode === 'register' && (
                                            <>
                                                <select 
                                                    className="w-full p-3 border rounded dark:bg-navy-900 dark:border-gray-700 dark:text-white"
                                                    onChange={e => setAuthForm({...authForm, role: e.target.value})}
                                                    value={authForm.role}
                                                >
                                                    <option value="student">Ã–ÄŸrenci</option>
                                                    <option value="teacher">Ã–ÄŸretmen</option>
                                                    <option value="admin">YÃ¶netici</option>
                                                </select>
                                                
                                                {authForm.role === 'teacher' && (
                                                    <select 
                                                        className="w-full p-3 border rounded border-brand-500 dark:bg-navy-900 dark:text-white"
                                                        onChange={e => setAuthForm({...authForm, branch: e.target.value})}
                                                    >
                                                        <option value="Matematik">Matematik</option>
                                                        <option value="Fizik">Fizik</option>
                                                        <option value="Kimya">Kimya</option>
                                                        <option value="Biyoloji">Biyoloji</option>
                                                        <option value="Edebiyat">Edebiyat</option>
                                                        <option value="Rehberlik">Rehberlik</option>
                                                        <option value="DiÄŸer">DiÄŸer</option>
                                                    </select>
                                                )}
                                            </>
                                        )}

                                        <Button onClick={loginMode === 'login' ? handleLogin : handleRegister} className="w-full mt-4">
                                            {loginMode === 'login' ? 'GiriÅŸ Yap' : 'KayÄ±t Ol'}
                                        </Button>
                                    </div>
                                </>
                            )}
                        </Card>
                    </div>
                );
            }

            // 3. DASHBOARD
            return (
                <div className={`min-h-screen ${isDarkMode ? 'dark' : ''}`}>
                    <div className="bg-slate-50 dark:bg-navy-950 min-h-screen text-slate-800 dark:text-slate-100 transition-colors duration-300">
                        
                        <header className="bg-white dark:bg-navy-900 shadow-md p-4 sticky top-0 z-40">
                            <div className="container mx-auto flex justify-between items-center">
                                <div className="flex items-center space-x-2">
                                    <div className="w-8 h-8 bg-brand-500 rounded-lg flex items-center justify-center font-bold text-white">H</div>
                                    <h1 className="text-xl font-bold hidden md:block">Hedef100Academia</h1>
                                </div>
                                <div className="flex items-center space-x-4">
                                    <span className="text-sm font-medium px-3 py-1 bg-gray-100 dark:bg-navy-800 rounded-full">
                                        {user.name} ({user.role === 'teacher' ? user.branch : user.role})
                                    </span>
                                    <button onClick={() => setActiveTab('game')} className="text-brand-500 hover:text-brand-600 font-bold">ðŸŽ® OYUN</button>
                                    <button onClick={() => setUser(null)} className="text-red-500 hover:text-red-600">Ã‡Ä±kÄ±ÅŸ</button>
                                </div>
                            </div>
                        </header>

                        <main className="container mx-auto p-4 md:p-8">
                            
                            {activeTab === 'game' && (
                                <div className="flex flex-col items-center justify-center space-y-6 animate-fade-in">
                                    <h2 className="text-3xl font-bold text-brand-500">Mola ZamanÄ±: Zihin AÃ§Ä±cÄ± Puzzle</h2>
                                    <div className="grid grid-cols-3 gap-2 bg-navy-800 p-2 rounded-xl shadow-2xl">
                                        {puzzle.map((num, idx) => (
                                            <div 
                                                key={idx}
                                                onClick={() => moveTile(idx)}
                                                className={`w-24 h-24 flex items-center justify-center text-3xl font-bold rounded-lg cursor-pointer transition-all duration-200 
                                                    ${num === 0 ? 'bg-transparent' : 'bg-brand-500 hover:bg-brand-400 text-white shadow-lg'}`}
                                            >
                                                {num !== 0 && num}
                                            </div>
                                        ))}
                                    </div>
                                    {gameWon && <div className="text-2xl font-bold text-green-500 animate-bounce">TEBRÄ°KLER! ZÄ°HNÄ°NÄ° TAZELEDÄ°N! ðŸŽ‰</div>}
                                    <div className="flex space-x-4">
                                        <Button onClick={shufflePuzzle}>KarÄ±ÅŸtÄ±r / Yeni Oyun</Button>
                                        <Button variant="secondary" onClick={() => setActiveTab('dashboard')}>Derse DÃ¶n</Button>
                                    </div>
                                </div>
                            )}

                            {activeTab === 'dashboard' && (
                                <div className="space-y-6">
                                    {user.role === 'admin' && (
                                        <Card>
                                            <h3 className="text-xl font-bold mb-4">ðŸ‘‘ YÃ¶netici Paneli</h3>
                                            <p className="mb-4">Sistemde toplam <b>{users.length}</b> kullanÄ±cÄ± var.</p>
                                            <div className="space-y-2">
                                                <input type="text" placeholder="TÃ¼m kullanÄ±cÄ±lara duyuru gÃ¶nder..." className="w-full p-2 border rounded dark:bg-navy-900 dark:text-white" />
                                                <Button>Duyuru YayÄ±nla</Button>
                                            </div>
                                        </Card>
                                    )}

                                    {user.role === 'student' && (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                                <Card className="border-l-4 border-blue-500">
                                                    <h4 className="text-gray-500 text-sm">Hedef</h4>
                                                    <p className="text-2xl font-bold">{user.target || "Belirlenmedi"}</p>
                                                </Card>
                                                <Card className="border-l-4 border-green-500">
                                                    <h4 className="text-gray-500 text-sm">KoÃ§</h4>
                                                    <p className="text-2xl font-bold">{user.coachId ? "AtandÄ±" : "AranÄ±yor"}</p>
                                                </Card>
                                                <Card className="border-l-4 border-purple-500">
                                                    <h4 className="text-gray-500 text-sm">Ortalama Net</h4>
                                                    <p className="text-2xl font-bold">78.5</p>
                                                </Card>
                                            </div>
                                            
                                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                                <Card>
                                                    <h3 className="text-lg font-bold mb-4">HaftalÄ±k Net DeÄŸiÅŸimi</h3>
                                                    <div className="h-64 w-full">
                                                        <ResponsiveContainer width="100%" height="100%">
                                                            <LineChart data={[{name:'Pzt', net:40}, {name:'Sal', net:45}, {name:'Ã‡ar', net:55}, {name:'Per', net:52}, {name:'Cum', net:60}]}>
                                                                <CartesianGrid strokeDasharray="3 3" stroke="#334155" />
                                                                <XAxis dataKey="name" stroke="#94a3b8" />
                                                                <YAxis stroke="#94a3b8" />
                                                                <Tooltip contentStyle={{backgroundColor: '#1e293b', border: 'none', color: '#fff'}} />
                                                                <Line type="monotone" dataKey="net" stroke="#f97316" strokeWidth={3} />
                                                            </LineChart>
                                                        </ResponsiveContainer>
                                                    </div>
                                                </Card>
                                                <Card>
                                                    <h3 className="text-lg font-bold mb-4">Ders Analizi</h3>
                                                    <div className="h-64 w-full">
                                                        <ResponsiveContainer width="100%" height="100%">
                                                            <RadarChart outerRadius={90} data={[{subject: 'Mat', A: 120, fullMark: 150}, {subject: 'Fiz', A: 98, fullMark: 150}, {subject: 'Kim', A: 86, fullMark: 150}, {subject: 'Bio', A: 99, fullMark: 150}, {subject: 'Geo', A: 85, fullMark: 150}]}>
                                                                <PolarGrid stroke="#334155" />
                                                                <PolarAngleAxis dataKey="subject" stroke="#94a3b8" />
                                                                <PolarRadiusAxis angle={30} domain={[0, 150]} stroke="none" />
                                                                <Radar name="Sen" dataKey="A" stroke="#f97316" fill="#f97316" fillOpacity={0.6} />
                                                            </RadarChart>
                                                        </ResponsiveContainer>
                                                    </div>
                                                </Card>
                                            </div>
                                        </>
                                    )}

                                    {user.role === 'teacher' && (
                                        <Card>
                                            <h3 className="text-xl font-bold mb-4">ðŸŽ“ Ã–ÄŸretmen Paneli ({user.branch})</h3>
                                            <p className="text-gray-500">Åžu an aktif koÃ§luk yaptÄ±ÄŸÄ±nÄ±z Ã¶ÄŸrenci yok. Ã–ÄŸrenciler sizi "KoÃ§ Bul" sayfasÄ±nda <b>{user.branch}</b> Ã¶ÄŸretmeni olarak gÃ¶recekler.</p>
                                            <div className="mt-4 p-4 bg-gray-100 dark:bg-navy-900 rounded">
                                                <h4 className="font-bold">Admin'e Mesaj GÃ¶nder:</h4>
                                                <textarea className="w-full mt-2 p-2 rounded dark:bg-navy-800 dark:text-white" placeholder="Bir isteÄŸiniz var mÄ±?"></textarea>
                                                <Button className="mt-2" variant="secondary">GÃ¶nder</Button>
                                            </div>
                                        </Card>
                                    )}
                                </div>
                            )}
                        </main>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
